# 坦克大战（Tank Turbulence）

一款纯前端俯视角坦克生存小品，打开浏览器即可玩。随机地图、循环主题、弹道反弹和多种武器让每一局都不一样。

## 运行环境
- 现代桌面浏览器：推荐最新版 Chrome/Edge/Firefox，需允许运行本地脚本与音频。
- 分辨率：默认画布 960×640，窗口化全屏或 16:9 视窗体验最佳。
- 可选本地静态服务器：如需避免浏览器的本地脚本拦截，可使用 `npx serve .`。

## 快速上手
- 打开方式：双击 `index.html` 或在仓库根目录运行 `npx serve .` 后访问本地地址。
- 目标：在障碍密布的场景中存活并清掉所有敌方坦克，会自动进入下一关。
- 操作：`W`/`S` 前进后退，`A`/`D` 左右旋转，`Space` 射击，`R` 随时重开。
- 界面：顶部 HUD 显示关卡、生命、剩余敌人和状态；开局弹窗点“确认”开始。

## 启动教程
1) 克隆或下载仓库，保持文件在同一目录。
2) 直接启动：双击 `index.html` 用浏览器打开；若按键无响应，点击画面获取焦点。
3) 本地服务器（推荐，避免本地脚本限制）：在项目根目录运行 `npx serve .`，浏览器访问终端提示的本地地址。
4) 开始游戏：阅读开场说明后点击“确认”，首次点击会解锁音频；建议打开系统/浏览器声音。

## 玩法机制
- 随机地图：每关重新生成墙体，中心和左右区域有独立密度调节，保证可通行但充满遮挡。
- 敌人与节奏：每关敌人数量随关卡递增，最多同时 3 台在场；靠近玩家会追击，避开边界和墙体，出生附带短暂无敌盾。
- 生命与复活：初始 3 条命（上限 5），被击中会短暂等待复活；血量耗尽游戏结束，可按 `R` 立刻重开。
- 弹道与碰撞：普通子弹可多次反弹；墙体、边界阻挡移动；激光穿透地图，炮弹与地雷造成范围爆炸并喷射碎片。

## 道具与武器
- 刷新规则：最长约每 7–12 秒随机掉落，存活 14–22 秒后消失，拾取立即生效。
- 护盾（shield）：获得 8 秒免伤护盾；玩家出生也自带短护盾。
- 生命（heart）：生命 +1，最多 5。
- 激光（laser）：8 秒内发射穿透光束，不受墙体反弹影响。
- 炮弹（cannon）：装填 3 发重炮，命中或撞墙后大范围爆炸并生成弹片。
- 地雷（mine）：获得 2 枚地雷，可投放后延迟布防，靠近触发范围爆炸。

## 关卡主题
“霓虹夜幕”“沙漠日落”“极地霜寒”“丛林迷雾”“熔炉工厂”循环切换，影响背景、墙体色和子弹/激光配色。

## 音频与表现
- Web Audio API 生成 BGM 与射击、爆炸、护盾等效果音（点击开始后解锁音频）。
- 反弹子弹、爆炸闪光和碎片使用 Canvas 渲染；玩家上方显示 HP，死亡/复活有动效提示。

## 开发提示
- 纯前端实现，无外部资源依赖；现代 Chrome/Edge/Firefox 即可运行，建议开启声音。
- 核心文件：`index.html`（入口与指引）、`style.css`（HUD 与开场面板）、`main.js`（地图生成、AI、物理、道具、渲染、音频）。

## 常见问题
- 浏览器拦截本地脚本：允许运行本地脚本或用本地静态服务器打开。
- 没声音：首次点击开始才会创建音频上下文；若被浏览器静音，请手动开启。
